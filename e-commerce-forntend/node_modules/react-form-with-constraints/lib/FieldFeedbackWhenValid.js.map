{"version":3,"file":"FieldFeedbackWhenValid.js","sourceRoot":"","sources":["../src/FieldFeedbackWhenValid.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,KAAK,SAAS,MAAM,YAAY,CAAC;AAIxC,OAAO,EAAE,cAAc,EAA8B,MAAM,kBAAkB,CAAC;AAC9E,OAAO,EAAE,mBAAmB,EAAmC,MAAM,uBAAuB,CAAC;AAgB7F,MAAM,OAAO,sBAEX,SAAQ,KAAK,CAAC,SAA6C;IAF7D;;QASE,UAAK,GAAgC;YACnC,YAAY,EAAE,SAAS;SACxB,CAAC;QAgBF,sBAAiB,GAAG,CAAC,SAAiB,EAAE,EAAE;YAExC,IAAI,SAAS,KAAK,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,EAAE;gBACvD,IAAI,CAAC,QAAQ,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,CAAC;aAC5C;QACH,CAAC,CAAC;QAEF,qBAAgB,GAAG,CAAC,KAAY,EAAE,EAAE;YAElC,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,EAAE;gBACxD,IAAI,CAAC,QAAQ,CAAC,EAAE,YAAY,EAAE,KAAK,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;aAClD;QACH,CAAC,CAAC;QAEF,kBAAa,GAAG,CAAC,KAAY,EAAE,EAAE;YAE/B,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,EAAE;gBACxD,IAAI,CAAC,QAAQ,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,CAAC;aAC5C;QACH,CAAC,CAAC;IAcJ,CAAC;IA7CC,iBAAiB;QACf,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iCAAiC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC5E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC1E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,6BAA6B,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACtE,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,oCAAoC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC/E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mCAAmC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC7E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACzE,CAAC;IAwBD,MAAM;QACJ,MAAM,EAAE,KAAK,EAAE,GAAG,UAAU,EAAE,GAAI,IAAI,CAAC,KAAgD,CAAC;QAExF,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAG/B,8CAAU,UAAU,IAAE,KAAK,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,KAAK,EAAE,IAAI,CAChE,CAAC,CAAC,CAAC,IAAI,CAAC;IACX,CAAC;;AAtDM,mCAAY,GAAuD;IACxE,IAAI,EAAE,SAAS,CAAC,UAAU,CAAC,mBAAmB,CAAC,CAAC,UAAU;IAC1D,cAAc,EAAE,SAAS,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,UAAU;CAChE,CAAC","sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport { Field } from './Field';\nimport { FieldFeedbackClasses } from './FieldFeedback';\nimport { FieldFeedbacks, FieldFeedbacksChildContext } from './FieldFeedbacks';\nimport { FormWithConstraints, FormWithConstraintsChildContext } from './FormWithConstraints';\n\nexport interface FieldFeedbackWhenValidBaseProps {}\n\nexport interface FieldFeedbackWhenValidProps\n  extends FieldFeedbackWhenValidBaseProps,\n    FieldFeedbackClasses,\n    React.HTMLAttributes<HTMLSpanElement> {}\n\ninterface FieldFeedbackWhenValidState {\n  fieldIsValid: boolean | undefined;\n}\n\nexport type FieldFeedbackWhenValidContext = FormWithConstraintsChildContext &\n  FieldFeedbacksChildContext;\n\nexport class FieldFeedbackWhenValid<\n  Props extends FieldFeedbackWhenValidBaseProps = FieldFeedbackWhenValidProps\n> extends React.Component<Props, FieldFeedbackWhenValidState> {\n  static contextTypes: React.ValidationMap<FieldFeedbackWhenValidContext> = {\n    form: PropTypes.instanceOf(FormWithConstraints).isRequired,\n    fieldFeedbacks: PropTypes.instanceOf(FieldFeedbacks).isRequired\n  };\n  context!: FieldFeedbackWhenValidContext;\n\n  state: FieldFeedbackWhenValidState = {\n    fieldIsValid: undefined\n  };\n\n  /* eslint-disable react/destructuring-assignment */\n\n  componentDidMount() {\n    this.context.form.addFieldWillValidateEventListener(this.fieldWillValidate);\n    this.context.form.addFieldDidValidateEventListener(this.fieldDidValidate);\n    this.context.form.addFieldDidResetEventListener(this.fieldDidReset);\n  }\n\n  componentWillUnmount() {\n    this.context.form.removeFieldWillValidateEventListener(this.fieldWillValidate);\n    this.context.form.removeFieldDidValidateEventListener(this.fieldDidValidate);\n    this.context.form.removeFieldDidResetEventListener(this.fieldDidReset);\n  }\n\n  fieldWillValidate = (fieldName: string) => {\n    // Ignore the event if it's not for us\n    if (fieldName === this.context.fieldFeedbacks.fieldName) {\n      this.setState({ fieldIsValid: undefined });\n    }\n  };\n\n  fieldDidValidate = (field: Field) => {\n    // Ignore the event if it's not for us\n    if (field.name === this.context.fieldFeedbacks.fieldName) {\n      this.setState({ fieldIsValid: field.isValid() });\n    }\n  };\n\n  fieldDidReset = (field: Field) => {\n    // Ignore the event if it's not for us\n    if (field.name === this.context.fieldFeedbacks.fieldName) {\n      this.setState({ fieldIsValid: undefined });\n    }\n  };\n\n  // Don't forget to update native/FieldFeedbackWhenValid.render()\n  render() {\n    const { style, ...otherProps } = (this.props as unknown) as FieldFeedbackWhenValidProps;\n\n    return this.state.fieldIsValid ? (\n      // <span style=\"display: block\"> instead of <div> so FieldFeedbackWhenValid can be wrapped inside a <p>\n      // otherProps before className because otherProps contains data-feedback\n      <span {...otherProps} style={{ display: 'block', ...style }} />\n    ) : null;\n  }\n\n  /* eslint-enable react/destructuring-assignment */\n}\n"]}