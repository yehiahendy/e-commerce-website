{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\Zag System summer Training\\\\e-commerce-website\\\\e-commerce-forntend\\\\src\\\\user\\\\Signin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Layout from './../core/Layout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Signin = () => {\n  _s();\n\n  const [values, setValues] = useState({\n    email: '',\n    password: '',\n    error: '',\n    loading: false,\n    redirectToReferrer: false\n  });\n  const {\n    email,\n    password,\n    error,\n    loading,\n    redirectToReferrer\n  } = values;\n  /******************************************************************************************************************************* */\n\n  const creatUi = () => {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          onChange: handelChanges('email')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          onChange: handelChanges('password')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: submitHandler,\n        children: \"Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 13\n    }, this);\n  };\n  /************************************************************************************************************************************ */\n\n\n  const handelChanges = name => event => {\n    setValues({ ...values,\n      loading: false,\n      redirectToReferrer: false,\n      [name]: event.target.value\n    });\n  };\n  /************************************************************************************************************************************** */\n\n\n  const signinSubmit = user => {\n    return fetch(\"http://localhost:8000/api/signin\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(Response => {\n      return Response.json();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  /********************************************************************************************************************************************** */\n\n\n  const submitHandler = e => {\n    e.preventDefault();\n    signinSubmit({\n      email,\n      password\n    }) //this part to get the error msg and clear the text field\n    .then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error,\n          loading: false,\n          redirectToReferrer: false\n        });\n      } else {\n        authentication(data, setValues({ ...values,\n          email: '',\n          password: '',\n          error: false,\n          loading: true,\n          redirectToReferrer: true\n        }));\n      }\n    });\n  };\n  /********************************************************************************************************************************************* */\n\n\n  const showErrorMsg = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? '' : 'none'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this);\n  };\n\n  const showSuccessMsg = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info\",\n      style: {\n        display: loading ? '' : 'none'\n      },\n      children: \"Loading......\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this);\n  };\n  /**************************************************************************************************************************************************** */\n\n\n  const redirectUser = () => {\n    if (redirectToReferrer) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }, this);\n    }\n  };\n  /****************************************************************************************************************************************************** */\n\n\n  const authentication = (data, next) => {\n    if (typeof window != 'undefined') {\n      localStorage.setItem('jwt', JSON.stringify(data));\n      next();\n    }\n  };\n  /***************************************************************************************************************************************************** */\n\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    title: \"Sign in Page\",\n    discreption: \"This is the sign in page for Ecommerce website \",\n    className: \"container col-md-8 offset-md-2\",\n    children: [showSuccessMsg(), showErrorMsg(), creatUi(), redirectUser()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 1\n  }, this);\n};\n\n_s(Signin, \"uwvEatrLA+M2ZMMl/fyujiIl+8U=\");\n\n_c = Signin;\nexport default Signin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signin\");","map":{"version":3,"sources":["D:/Work/Zag System summer Training/e-commerce-website/e-commerce-forntend/src/user/Signin.jsx"],"names":["React","useState","Redirect","Layout","Signin","values","setValues","email","password","error","loading","redirectToReferrer","creatUi","handelChanges","submitHandler","name","event","target","value","signinSubmit","user","fetch","method","headers","body","JSON","stringify","then","Response","json","catch","err","console","log","e","preventDefault","data","authentication","showErrorMsg","display","showSuccessMsg","redirectUser","next","window","localStorage","setItem"],"mappings":"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","sourcesContent":["import React, { useState }  from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Layout from './../core/Layout';\r\nconst Signin = () => {\r\n    const [values,setValues] = useState({\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        loading : false,\r\n        redirectToReferrer : false\r\n    });\r\n    const {email,password, error,loading,redirectToReferrer } = values;\r\n/******************************************************************************************************************************* */\r\n    const creatUi = () => \r\n    {\r\n        return(\r\n            <form>\r\n                <div className = \"form-group\">\r\n                    <label className = \"text-muted\">Email</label>\r\n                    <input type =\"text\" className = \"form-control\" onChange ={handelChanges('email')}></input>\r\n                </div>\r\n                <div className = \"form-group\">\r\n                    <label className = \"text-muted\">Password</label>\r\n                    <input type =\"password\" className = \"form-control\" onChange ={handelChanges('password')}></input>\r\n                </div>\r\n                <button className = \"btn btn-primary\" onClick = {submitHandler}>Sign in</button>\r\n            </form>\r\n        );\r\n    }\r\n/************************************************************************************************************************************ */\r\n    const handelChanges = name => event =>\r\n    {\r\n        setValues({...values,loading :false,redirectToReferrer :false,[name]:event.target.value});\r\n    }\r\n/************************************************************************************************************************************** */\r\n    const signinSubmit = user =>{\r\n\r\n        return (fetch(\"http://localhost:8000/api/signin\", {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n        })\r\n        .then(Response =>{\r\n        \r\n            return Response.json();\r\n    \r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        }));\r\n    }\r\n/********************************************************************************************************************************************** */\r\n    const submitHandler = (e) =>{\r\n        e.preventDefault();\r\n        signinSubmit({email,password})\r\n        //this part to get the error msg and clear the text field\r\n        .then(                             \r\n            data => {\r\n                if(data.error)\r\n                {\r\n                    setValues({...values,error:data.error,loading : false,redirectToReferrer : false})\r\n                }\r\n                else{\r\n\r\n                    authentication(data,\r\n                        setValues({...values,\r\n                            email : '',\r\n                            password : '',\r\n                            error : false,\r\n                            loading : true,\r\n                            redirectToReferrer : true\r\n                        })\r\n                        );\r\n                }\r\n            });\r\n        \r\n        }\r\n/********************************************************************************************************************************************* */\r\n    const showErrorMsg = () => {\r\n        return(\r\n            <div className = \"alert alert-danger\" style = {{display : error ? '' :'none'}}>{error}</div>\r\n        );\r\n        }\r\n        const showSuccessMsg = () => {\r\n            return(\r\n                <div className = \"alert alert-info\" style = {{display : loading ? '' :'none'}}>\r\n                    Loading......\r\n                    </div>\r\n            );\r\n        }\r\n/**************************************************************************************************************************************************** */\r\n    const redirectUser = () =>{\r\n            if (redirectToReferrer)\r\n            {\r\n\r\n                return (<Redirect to=\"/\" />);\r\n            }\r\n            \r\n    }\r\n/****************************************************************************************************************************************************** */\r\nconst authentication = (data,next) =>\r\n{\r\n    if(typeof window != 'undefined')\r\n    {\r\n        localStorage.setItem('jwt',JSON.stringify(data));\r\n        next();\r\n    }\r\n}\r\n\r\n/***************************************************************************************************************************************************** */\r\n\r\nreturn(\r\n<Layout title =\"Sign in Page\" discreption = \"This is the sign in page for Ecommerce website \" className = \"container col-md-8 offset-md-2\">\r\n{showSuccessMsg()}\r\n{showErrorMsg()}\r\n{creatUi()}\r\n{redirectUser()}\r\n</Layout>\r\n);\r\n}\r\n\r\nexport default Signin"]},"metadata":{},"sourceType":"module"}